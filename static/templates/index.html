<div class="main-section flex-column center-align">
    <!-- Navigation -->
    <nav class="navbar navbar-default navbar-fixed-top">
        <div class="container">
            <div class="navbar-header page-scroll">
                <button type="button" class="navbar-toggle" data-toggle="collapse"
                        data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand page-scroll main-title">Foresight - Glaucoma
                    detection</a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-right">
                    <div class="select-patient flex-row">
                        <div class="select-patient-label">Select patient:</div>
                        <select ng-model="selectedPatient" required ng-change="getPatientData()">
                            <option selected disabled hidden value="">Select Eye</option>
                            <option ng-repeat="patient in patients track by $index"
                                    value="{[ patient.id + '_' + patient.eye ]}">
                                {[ patient.id ]} ({[ patient.eye ]})
                            </option>
                        </select>
                    </div>
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container-fluid -->
    </nav>
    <div class="row top-row">
        <div id="visual-fields">

            <body ng-controller="MainController">

            <div class="flex-row top-bar">
                <select ng-model="selectedView" class="dataset-selector" ng-change="refreshCharts()"
                        ng-options="dataset.name for dataset in getViews()">
                </select>
                <label class="showValuesToggle">
                    Show Values: <input type="checkbox" ng-model="showValuesOnHeatMap"
                                        ng-change="setTextVisibility()">
                </label>
            </div>

            <div id="charts" class="flex-row scroll"></div>

            <div class="flex-row space-between">
                <div id="labels" class="flex-column center" ng-if="labels">
                    <div class="flex-row">
                        <div class="flex-row">
                            <div ng-repeat="algo in algos">
                                <div class="flex-col">
                                    <div class="eye-label-value" ng-class="labels[algo.key]">
                                        <span ng-if="labels[algo.key]=='NA'">NA</span>
                                    </div>
                                    <div class="algo-label">{[ algo.label ]}</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="eye-label-legend flex-row">
                        <div class="eye-label-value improving"></div>
                        <div class="legend-text">Improving</div>
                        <div class="eye-label-value stable"></div>
                        <div class="legend-text">Stable</div>
                        <div class="eye-label-value progressing"></div>
                        <div class="legend-text">Progressing</div>
                        <div class="eye-label-value unclear"></div>
                        <div class="legend-text">Unclear</div>
                    </div>
                </div>
                <div class="flex-column-container">
                    <div class="next-button" ng-click="nextPatient(selectedPatient)">
                        Next
                    </div>
                    <div id="legend"></div>
                </div>
            </div>
            <div class="p-value-desc" ng-show="selectedView.data_type != 'sensitivity'">
                <div>Red border: p<0.005</div>
                <div>Light red border: p<0.05</div>
                <div>Percentile is based on a dataset of 13156 patients</div>
            </div>
            </body>

        </div>
    </div>
</div>
